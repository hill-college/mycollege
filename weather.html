<!DOCTYPE html>
<html>
<head>
<title>Weather TEST</title>
</head>
<body>

<h1>Current Weather @ GSG</h1>

<p id="temperature"></p>
<p id="weather-description"></p>
<p id="uv-index"></p>

<script>
    function getWeather() {
        const apiKey = 'c7a15be9528017f83416edba807228cc';
        const city = 'kalgan,au';
        const weatherApiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

        fetch(weatherApiUrl)
            .then(response => response.json())
            .then(data => {
                const temperature = Math.round(data.main.temp); // Round temperature to nearest integer
                const weatherDescription = data.weather[0].description;

                // Display rounded temperature
                document.getElementById('temperature').innerText = `${temperature}Â°C`;

                // Display weather description and corresponding emoji
                const weatherEmoji = getWeatherEmoji(weatherDescription);
                document.getElementById('weather-description').innerText = `${weatherEmoji}`;

                // Fetch UV index data based on location coordinates
                const { lat, lon } = data.coord;
                getUVIndex(lat, lon, apiKey);
            })
            .catch(error => {
                console.error('Error fetching weather data:', error);
                document.getElementById('temperature').innerText = 'Error Temperature';
            });
    }

    function getWeatherEmoji(description) {
        const emojiMap = {
            'clear sky': 'â˜€ï¸',
            'few clouds': 'ðŸŒ¤ï¸',
            'scattered clouds': 'ðŸŒ¥ï¸',
            'broken clouds': 'â˜ï¸',
            'shower rain': 'ðŸŒ§ï¸',
            'rain': 'ðŸŒ§ï¸',
            'thunderstorm': 'â›ˆï¸',
            'snow': 'â„ï¸',
            'mist': 'ðŸŒ«ï¸'
        };
        return emojiMap[description.toLowerCase()] || 'ðŸŒ¤ï¸';
    }

    function getUVIndex(lat, lon, apiKey) {
        const uvApiUrl = `https://api.openweathermap.org/data/2.5/uvi?lat=${lat}&lon=${lon}&appid=${apiKey}`;

        fetch(uvApiUrl)
            .then(response => response.json())
            .then(data => {
                const uvIndex = Math.round(data.value); // Round UV index to nearest integer
                const uvEmoji = getUVEmoji(uvIndex);
                document.getElementById('uv-index').innerText = `UV: ${uvIndex} ${uvEmoji}`;
            })
            .catch(error => {
                console.error('Error fetching UV index:', error);
                document.getElementById('uv-index').innerText = 'Error UV';
         });
    }

    function getUVEmoji(uvIndex) {
        if (uvIndex <= 2) return 'ðŸŸ¢'; // Low
        if (uvIndex <= 5) return 'ðŸŸ¡'; // Moderate
        if (uvIndex <= 7) return 'ðŸŸ '; // High
        if (uvIndex <= 10) return 'ðŸ”´'; // Very high
        return 'ðŸŸ£'; // Extreme
    }

    document.addEventListener('DOMContentLoaded', getWeather);
</script>


</body
</html>